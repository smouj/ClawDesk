<!doctype html>
<html lang="es">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="clawdesk-api-token" content="__CLAWDESK_TOKEN__" />
    <title>ClawDesk OS · Retro-OS 2000 minimal</title>
    <link rel="icon" href="assets/brand/logo-brain.svg" />
    <link rel="stylesheet" href="styles/tokens.css" />
    <link rel="stylesheet" href="styles/components.css" />
    <link rel="stylesheet" href="styles/layout.css" />
  </head>
  <body>
    <div class="window">
      <header class="titlebar">
        <div class="brand">
          <img src="assets/brand/logo-brain.svg" alt="ClawDesk logo" />
          <div>
            <h1>ClawDesk OS</h1>
            <small>Retro-OS 2000 minimal · Secure Gateway Ops</small>
          </div>
        </div>
        <div class="status">
          <div class="lcd" id="lcd-status">HOST: --</div>
          <div class="vu" id="vu-activity" aria-hidden="true">
            <span></span><span></span><span></span><span></span><span></span>
          </div>
          <select id="profile-select" aria-label="Perfil activo"></select>
        </div>
      </header>

      <nav class="tabstrip" role="tablist">
        <button class="active" data-page="dashboard">Dashboard</button>
        <button data-page="profiles">Profiles</button>
        <button data-page="macros">Macros</button>
        <button data-page="usage">Usage Center</button>
        <button data-page="timeline">Timeline</button>
        <button data-page="logs">Logs</button>
        <button data-page="settings">Settings</button>
      </nav>

      <section class="page active" id="page-dashboard">
        <div class="toolbar">
          <div class="inline">
            <span class="badge" id="version-badge">v1.3.0</span>
            <span class="badge" id="gateway-state">offline</span>
          </div>
          <div class="inline">
            <button class="btn" id="refresh-dashboard">Sync</button>
            <button class="btn secondary" id="open-control-ui">Open Control UI</button>
          </div>
        </div>
        <div class="grid-3">
          <article class="card">
            <div class="section-header">
              <h3>Gateway Status</h3>
              <span class="badge" id="gateway-allow">allow-actions</span>
            </div>
            <div class="muted" id="gateway-summary">Sin datos</div>
            <div class="inline">
              <span class="lcd" id="gateway-latency">latency --</span>
              <span class="lcd" id="gateway-bind">bind --</span>
            </div>
          </article>
          <article class="card">
            <div class="section-header">
              <h3>Security</h3>
              <span class="badge ok">loopback</span>
            </div>
            <p class="muted">Acceso remoto solo vía túneles cifrados (Tailscale/WireGuard/SSH).</p>
            <div class="inline">
              <button class="btn secondary" id="tailscale-guide">Guía Tailscale</button>
              <button class="btn secondary" id="ssh-guide">Guía SSH</button>
            </div>
          </article>
          <article class="card">
            <div class="section-header">
              <h3>Usage Pulse</h3>
              <span class="badge" id="usage-state">n/a</span>
            </div>
            <div class="inline">
              <span class="lcd" id="usage-tokens">tokens --</span>
              <span class="lcd" id="usage-cost">cost --</span>
            </div>
            <p class="muted" id="usage-note">Sin datos recientes.</p>
          </article>
        </div>
      </section>

      <section class="page" id="page-profiles">
        <div class="toolbar">
          <h2>Multi-Gateway Profiles</h2>
          <button class="btn" id="new-profile">Nuevo perfil</button>
        </div>
        <div class="grid-2" id="profiles-list"></div>
        <p class="muted" id="profiles-empty">No hay perfiles registrados.</p>
      </section>

      <section class="page" id="page-macros">
        <div class="toolbar">
          <h2>Automation / Macros</h2>
        </div>
        <div class="grid-2">
          <div class="card">
            <h3>Macros disponibles</h3>
            <div id="macro-list"></div>
          </div>
          <div class="card">
            <h3>Output</h3>
            <div class="terminal" id="macro-output">Esperando ejecución...</div>
          </div>
        </div>
      </section>

      <section class="page" id="page-usage">
        <div class="toolbar">
          <h2>Usage Center</h2>
          <div class="inline">
            <select id="usage-range">
              <option value="24h">Últimas 24h</option>
              <option value="7d">Últimos 7 días</option>
            </select>
            <button class="btn secondary" id="export-json">Export JSON</button>
            <button class="btn secondary" id="export-csv">Export CSV</button>
          </div>
        </div>
        <div class="grid-2">
          <article class="card">
            <h3>Totals</h3>
            <div class="inline">
              <span class="lcd" id="usage-total-tokens">tokens --</span>
              <span class="lcd" id="usage-total-cost">cost --</span>
            </div>
            <p class="muted" id="usage-timestamp">--</p>
          </article>
          <article class="card">
            <h3>By Provider</h3>
            <table class="table" id="usage-providers"></table>
          </article>
          <article class="card">
            <h3>By Model</h3>
            <table class="table" id="usage-models"></table>
          </article>
          <article class="card">
            <h3>By Tool</h3>
            <table class="table" id="usage-tools"></table>
          </article>
        </div>
      </section>

      <section class="page" id="page-timeline">
        <div class="toolbar">
          <h2>Event Timeline</h2>
          <button class="btn" id="refresh-events">Refresh</button>
        </div>
        <div class="card">
          <div id="timeline-list"></div>
        </div>
      </section>

      <section class="page" id="page-logs">
        <div class="toolbar">
          <h2>Logs</h2>
          <div class="inline">
            <input type="search" id="log-filter" placeholder="Filtrar..." />
            <button class="btn secondary" id="toggle-scroll">Pause</button>
            <button class="btn secondary" id="download-logs">Download</button>
          </div>
        </div>
        <div class="terminal" id="log-stream"></div>
      </section>

      <section class="page" id="page-settings">
        <div class="toolbar">
          <h2>Settings</h2>
        </div>
        <div class="grid-2">
          <article class="card">
            <h3>Refresh Rate</h3>
            <div class="inline">
              <div class="knob" aria-hidden="true"></div>
              <input type="range" id="refresh-rate" min="800" max="8000" step="200" value="1500" />
              <span class="lcd" id="refresh-rate-label">1500ms</span>
            </div>
          </article>
          <article class="card">
            <h3>Remote Profiles</h3>
            <p class="muted">Requiere opt-in explícito en config.json + confirmación en UI.</p>
            <span class="badge" id="remote-status">disabled</span>
          </article>
        </div>
      </section>

      <footer>ClawDesk v1.3.0 · Security-first loopback dashboard.</footer>
    </div>

    <div class="toast" id="toast"></div>
    <script type="module" src="js/app.js"></script>
  </body>
</html>
